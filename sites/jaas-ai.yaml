name: jaas-ai
domain: jaas.ai

addWwwPrefixHost: true

container:
  image: prod-comms.docker-registry.canonical.com/jaas.ai

useSquid: false

envSecrets:
  sentryDsn: https://5b54e6946be34749935c4dd2d9d01cb8@sentry.is.canonical.com//7
  useGoogleApiKey: true

extraHosts:
  - host:
    domain: docs.jujucharms.com
    tlsSecret: docs-jujucharms-com-tls

# Overrides for production
production:
  nginxConfig:  |
    if ($host = 'docs.jujucharms.com' ) {
      rewrite ^ https://jaas.ai/docs$request_uri? permanent;
    }
    if ($host != 'jaas.ai' ) {
      rewrite ^ https://jaas.ai$request_uri? permanent;
    }
    more_set_headers "Link: <https://assets.ubuntu.com>; rel=preconnect; crossorigin, <https://assets.ubuntu.com>; rel=preconnect";

# Overrides for staging
staging:
  addWwwPrefixHost: false

  extraHosts:
    - host:
      domain: docs.staging.jujucharms.com
      tlsSecret: docs-staging-jujucharms-com

  nginxConfig:  |
    more_set_headers "X-Robots-Tag: noindex";
    if ($host = 'docs.staging.jujucharms.com' ) {
      rewrite ^ https://staging.jaas.ai/docs$request_uri? permanent;
    }
    more_set_headers "Link: <https://assets.ubuntu.com>; rel=preconnect; crossorigin, <https://assets.ubuntu.com>; rel=preconnect";
